### 3.2.2. Running the API

```bash
$ ruby app.rb
```

### 3.2.3. Testing the API

####


site url |  createdAt   |   timeSpent


views:
-----
daily   |weekly     |monthly        | alltime


class CreateSiteVisits < ActiveRecord::Migration[7.1]
  def change
    create_table :site_visits, if_not_exists: true do |t|
      t.string :site_url
      t.string :site_name
      t.integer :time_spent

      t.timestamps
    end
  end
end


require 'sinatra'
require 'sinatra/activerecord'
require 'active_record'
require 'sqlite3'
require './models/site_visit'

#DB = {:conn => SQLite3::Database.new("db/database.db")}

set :views, File.expand_path('../views', __FILE__)
set :public_folder, 'public'

set :database_file, 'config/database.yml'


#set rack env and sinatra env
# set :environment, :development
# set :run, true
# set :server, :puma


#bundle exec rerun puma
get '/' do
    begin
        SiteVisit.create(site_url: "https://example.com", site_name: "Example", time_spent: 120)
      rescue ActiveRecord::StatementInvalid => e
        puts "Error: #{e.message}"
      end
      @site_visits = SiteVisit.all
      erb :index
end

